<!DOCTYPE html>
<html>
<head>
    <title>Gadget Starter</title> 
	
    <link rel="stylesheet" href="lib/bootstrap.min.css">
    
    <style type="text/css">
        body {
            margin: 10px;
            background-color: transparent;
        }
    </style>
    
    <script type="text/javascript" src="lib/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="lib/gadgetlib.js"></script>
    
    <script type="text/javascript">
        
        $(document).ready(function () {
            <!-- gadget.ready().then(gadget.fetch).then(function () {
                //$('#main').css({ 'font-size': gadget.getConfig('font_size') });
            //}); -->
			
			
			var api_host = '',
			token = '',
			account = '',
			gid = '',
			auth = '',
			site = '',
			user = '',
			count;
			
			gadget.ready().then(function () {
				api_host = gadget.get('apihost');
				token = gadget.get('token');
				account = gadget.get('account');
				gid = gadget.get('gid');
				auth = {
					authorization_token: token,
					account: account,
					gadget: gid
				};
				site = gadget.get('site');
				user = gadget.get('user');
				count = 25;
				
				
				$.ajax({
					type: 'GET',
					url: api_host + '/activity/list' + '?site=' + site + '&count=' + count, 
					data: auth, 
					success: function (data) {
						console.log(data);
						<!-- page_id = data.info.src_tag;
						//page_id = page_id.substring(page_id.indexOf(':') + 1, page_id.indexOf('}'));
						//callback(page_id); -->
					},
					error: function (xhr, status, error) {
						console.error('Error:', status, error);
					}
				});
			});
			
        });
        
        $(gadget).on({
            'expanded': function (evt) {
                // This event is triggered when the user expands (makes visible) a sidebar gadget.
                console.log('Gadget expanded.');
            },
            'collapsed': function (evt) {
                // This event is triggered when the user collapses (hides) a sidebar gadget.
                console.log('Gadget collapsed.');
            },
            'configuration': function (evt, config) {
                // If the user changes the gadget's configuration through the configuration modal,
                // the gadget will hear about it and get the new config in the data argument here.
                console.log('New config:', config);
                $('#main').css({ 'font-size': config.font_size });
            },
            'notification': function (evt, notification) {
                // If the gadget's config.xml contains a "notification" entry, any notifications
                // of the specified type(s) generated by OU Campus will trigger 'notification'
                // events that can be handled here.
                console.log('Notification received:', notification);
            }
        });
        
    </script>
</head>
<body>
    <div id="main">
        Gadget content goes here.
		Nick's Gadget
    </div>
    <!--
        The following hidden div is only needed if you'll be editing your gadget in
        OU Campus's source code editor. OU Campus automatically adds a DirectEdit link
        to HTML files that you edit in OU Campus. This div hides the DirectEdit link.
    -->
    <div style="display:none">
        <!-- ouc:ob --><!-- /ouc:ob -->
    </div>
</body>
</html>
